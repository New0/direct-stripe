function setDonationAmount(){jQuery(".donationvalue").each(function(){var e=jQuery(this).data("donation-input-id"),i=this.value;window[e].original_amount=i})}function stripe_checkout(d){return StripeCheckout.configure({key:d.key,token:function(e,i){var n=d,r=n.type;if("donation"===r)var s=jQuery("#donationvalue-"+n.instance).val();else s=n.amount;var a="#ds-answer-"+n.instance,t="#loadingDS-"+n.instance;jQuery(t).show(),jQuery.post(d.ajaxurl,{action:"ds_process_button",stripeToken:e.id,stripeEmail:e.email,type:r,amount:s,params:n,ds_nonce:n.ds_nonce,billing_name:i.billing_name,billing_address_country:i.billing_address_country,billing_address_zip:i.billing_address_zip,billing_address_state:i.billing_address_state,billing_address_line1:i.billing_address_line1,billing_address_city:i.billing_address_city,billing_address_country_code:i.billing_address_country_code,shipping_name:i.shipping_name,shipping_address_country:i.shipping_address_country,shipping_address_zip:i.shipping_address_zip,shipping_address_state:i.shipping_address_state,shipping_address_line1:i.shipping_address_line1,shipping_address_city:i.shipping_address_city,shipping_address_country_code:i.shipping_address_country_code},function(e){switch(e.id){case"1":jQuery(t).hide(),jQuery(a).addClass("success"),jQuery(a).html(e.message),jQuery(a).show(),setTimeout(function(){jQuery(a).hide()},1e4);break;case"2":jQuery(t).hide(),window.location.assign(e.url);break;default:jQuery(t).hide(),jQuery(a).addClass("error"),jQuery(a).html(e.message),jQuery(a).show(),setTimeout(function(){jQuery(a).hide()},1e4)}})}})}jQuery(".direct-stripe-button-id").on("click",function(e){setDonationAmount();var i=jQuery(this).data("id"),n=window[i];if(""!==n.currency)var r=n.currency;else r=n.general_currency;if(""!==n.display_amount&&"subscription"!==n.type&&"donation"!==n.type)var s=parseInt(n.original_amount);else if(""!==n.display_amount&&"donation"===n.type)if("1"===n.zero_decimal||"true"===n.zero_decimal)s=parseInt(n.original_amount);else s=parseFloat(100*n.original_amount);else s=0;"1"===n.billing||"true"===n.billing?billing=!0:billing=!1,"1"===n.shipping||"true"===n.shipping?shipping=!0:shipping=!1,"1"===n.rememberme||"true"===n.rememberme?rememberme=!0:rememberme=!1,""===n.capture||"false"===n.capture?n.capture=!1:n.capture=!0;var a="#ds-answer-"+i;return jQuery(this).hasClass("ds-check-tc")&&!jQuery("#ds-conditions-"+i).is(":checked")?(jQuery(a).html(direct_stripe_script_vars.text.checkTC+"<br/>"),jQuery(a).addClass("error"),jQuery(a).show(),setTimeout(function(){jQuery(a).hide()},1e4),!1):!jQuery(this).hasClass("ds-check-donation")||jQuery("#donationvalue-"+i).val()||jQuery("#donationvalue-"+i).val().match(/^\+?[0-9]*\.?[0-9]+$/)?(handler=stripe_checkout(n),!1!==billing?handler.open({key:n.key,locale:n.locale,image:n.image,name:n.name,description:n.description,email:n.current_email_address,currency:r,panelLabel:n.panellabel,amount:s,billingAddress:billing,shippingAddress:shipping,allowRememberMe:rememberme}):handler.open({key:n.key,locale:n.locale,image:n.image,name:n.name,description:n.description,email:n.current_email_address,currency:r,panelLabel:n.panellabel,amount:s,allowRememberMe:rememberme}),void e.preventDefault()):(jQuery(a).html(direct_stripe_script_vars.text.enterAmount+"<br/>"),jQuery(a).addClass("error"),jQuery(a).show(),setTimeout(function(){jQuery(a).hide()},1e4),!1)}),window.addEventListener("popstate",function(){handler.close()});