function stripe_checkout(o){return StripeCheckout.configure({key:o.key,token:function(e,i){var n=o,r=n.type,s="#ds-answer-"+n.instance,a="#loadingDS-"+n.instance;if("donation"===r)var t=setDonationValue(n.instance);else t=n.amount;jQuery(a).show(),jQuery.post(o.ajaxurl,{action:"ds_process_button",stripeToken:e.id,stripeEmail:e.email,type:r,amount:t,params:n,ds_nonce:n.ds_nonce,billing_name:i.billing_name,billing_address_country:i.billing_address_country,billing_address_zip:i.billing_address_zip,billing_address_state:i.billing_address_state,billing_address_line1:i.billing_address_line1,billing_address_city:i.billing_address_city,billing_address_country_code:i.billing_address_country_code,shipping_name:i.shipping_name,shipping_address_country:i.shipping_address_country,shipping_address_zip:i.shipping_address_zip,shipping_address_state:i.shipping_address_state,shipping_address_line1:i.shipping_address_line1,shipping_address_city:i.shipping_address_city,shipping_address_country_code:i.shipping_address_country_code},function(e){switch(e.id){case"1":jQuery(a).hide(),jQuery(s).addClass("success"),jQuery(s).html(e.message),jQuery(s).show(),setTimeout(function(){jQuery(s).hide()},1e4);break;case"2":jQuery(a).hide(),window.location.assign(e.url);break;default:jQuery(a).hide(),jQuery(s).addClass("error"),jQuery(s).html(e.message),jQuery(s).show(),setTimeout(function(){jQuery(s).hide()},1e4)}})}})}function setDonationValue(e){var i=window[e];return i.original_amount=jQuery("#donationvalue-"+e).val(),i.original_amount}function checkTC(e,i){return jQuery(e).hasClass("ds-check-tc")&&!jQuery("#ds-conditions-"+i).is(":checked")}function checkDonationInput(e,i,n){return jQuery(e).hasClass("ds-check-donation")&&!i.original_amount&&!i.original_amount.match(n)}function returnError(e,i,n){"emptyTc"===n?text=i.text.checkTC:"emptyDonation"===n&&(text=i.text.enterAmount),jQuery(e).html(text+"<br/>"),jQuery(e).addClass("error"),jQuery(e).show(),setTimeout(function(){jQuery(e).hide()},1e4)}jQuery(".direct-stripe-button-id").on("click",function(e){var i=jQuery(this).data("id");0<jQuery(".donationvalue").length&&setDonationValue(i);var n=window[i];if(""!==n.currency)var r=n.currency;else r=n.general_currency;var s="1"===n.billing||"true"===n.billing,a="1"===n.shipping||"true"===n.shipping,t="1"===n.rememberme||"true"===n.rememberme,o="#ds-answer-"+i;if(""!==n.display_amount&&"subscription"!==n.type&&"donation"!==n.type)var d=parseInt(n.original_amount);else if(""!==n.display_amount&&"donation"===n.type)if("1"===n.zero_decimal||"true"===n.zero_decimal)d=parseInt(n.original_amount);else d=parseFloat(100*n.original_amount);else d=0;var l=checkTC(this,i),c=checkDonationInput(this,n,/^\+?[0-9]*\.?[0-9]+$/);return l?(returnError(o,direct_stripe_script_vars,"emptyTc"),!1):c?(returnError(o,direct_stripe_script_vars,"emptyDonation"),!1):(handler=stripe_checkout(n),!1!==s?handler.open({key:n.key,locale:n.locale,image:n.image,name:n.name,description:n.description,email:n.current_email_address,currency:r,panelLabel:n.panellabel,amount:d,billingAddress:s,shippingAddress:a,allowRememberMe:t}):handler.open({key:n.key,locale:n.locale,image:n.image,name:n.name,description:n.description,email:n.current_email_address,currency:r,panelLabel:n.panellabel,amount:d,allowRememberMe:t}),void e.preventDefault())}),window.addEventListener("popstate",function(){handler.close()});